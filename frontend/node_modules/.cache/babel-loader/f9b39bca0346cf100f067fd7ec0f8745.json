{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\PetAdoption\\\\frontend\\\\src\\\\containers\\\\Home\\\\Home.js\";\n// NPM Modules\nimport React, { useEffect } from 'react';\nimport { withNamespaces } from 'react-i18next'; // Material UI\n\nimport Container from '@material-ui/core/Container'; // Components\n\nimport AdvertList from '../../components/adverts/AdvertList';\nimport SearchForm from '../../components/forms/SearchForm';\nimport Footer from '../../components/layout/Footer';\nimport NavBar from '../../components/layout/NavBar'; // Containers\n// Own modules\n// Assets\n// CSS\n\nimport './styles.css'; // Main component\n\nfunction Home(props) {\n  // Translate\n  const t = props.t;\n  const _props$lastCall = props.lastCall,\n        start = _props$lastCall.start,\n        end = _props$lastCall.end,\n        totalCount = _props$lastCall.totalCount;\n  const _props$ui = props.ui,\n        currentPage = _props$ui.currentPage,\n        isFetching = _props$ui.isFetching;\n  const adverts = props.adverts,\n        session = props.session,\n        filters = props.filters,\n        tags = props.tags,\n        chats = props.chats;\n  const fetchTags = props.fetchTags,\n        setCurrentPage = props.setCurrentPage,\n        fetchIterateAdverts = props.fetchIterateAdverts,\n        enqueueSnackbar = props.enqueueSnackbar,\n        setFilters = props.setFilters,\n        resetFilters = props.resetFilters,\n        setFavorite = props.setFavorite,\n        searchAdverts = props.searchAdverts,\n        fetchAdverts = props.fetchAdverts; // On load\n\n  useEffect(() => {\n    fetchTags();\n    fetchAdverts().catch(error => enqueueSnackbar(t('Error loading pets ERROR', {\n      error\n    }), {\n      variant: 'error'\n    }));\n  }, [fetchTags, fetchAdverts, enqueueSnackbar, t]);\n\n  const favoriteAdvert = slug => {\n    if (!session.jwt) {\n      enqueueSnackbar(t('You need to log in to manage favorites'), {\n        variant: 'error'\n      });\n    } else {\n      setFavorite(slug).then(res => enqueueSnackbar(t('Advert SLUG ACTION favorites', {\n        slug,\n        action: res.favorite ? t('added to') : t('removed from')\n      }), {\n        variant: 'success'\n      })).catch(error => enqueueSnackbar(t('Error adding advert to favorite ERROR', {\n        error\n      }), {\n        variant: 'error'\n      }));\n    }\n  }; // Open chat\n\n\n  const openChat = slug => {\n    // Check first if already have a chat for that advert\n    const i = chats.findIndex(c => c.advert.slug === slug);\n\n    if (i < 0) {\n      props.createChat(slug).catch(error => enqueueSnackbar(t('Error opening a new chat session ERROR', {\n        error\n      }), {\n        variant: 'error'\n      }));\n    } else {\n      props.history.push(\"/chats/\".concat(chats[i]._id));\n    }\n  };\n\n  const onHandleSearchAdverts = filters => {\n    if (filters) {\n      return searchAdverts(filters).catch(error => enqueueSnackbar(t('Error loading pets ERROR', {\n        error\n      }), {\n        variant: 'error'\n      }));\n    }\n\n    fetchAdverts().catch(error => enqueueSnackbar(t('Error loading pets ERROR', {\n      error\n    }), {\n      variant: 'error'\n    }));\n  };\n\n  const iterateAdverts = direction => {\n    return fetchIterateAdverts(direction).catch(error => enqueueSnackbar(t('Error loading pets ERROR', {\n      error\n    }), {\n      variant: 'error'\n    }));\n  }; // Render\n\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(NavBar, {\n    session: props.session,\n    onLogout: props.logout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }), React.createElement(Container, {\n    className: \"Container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, React.createElement(\"main\", {\n    className: \"Section__Wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"Home__Results\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(SearchForm, {\n    tags: tags,\n    onSearchAdverts: onHandleSearchAdverts,\n    onSetFilters: setFilters,\n    onResetFilters: resetFilters,\n    filters: filters,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }), React.createElement(AdvertList, {\n    type: \"tiles\",\n    start: start,\n    end: end,\n    totalCount: totalCount,\n    currentPage: currentPage,\n    adverts: adverts,\n    session: session,\n    isLoading: isFetching,\n    onFavoriteAdvert: favoriteAdvert,\n    onSetCurrentPage: setCurrentPage,\n    onfetchIterateAdverts: iterateAdverts,\n    onOpenChat: openChat,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  })))), React.createElement(Footer, {\n    session: props.session,\n    onLogout: props.logout,\n    active: \"Home\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }));\n}\n\nexport default withNamespaces()(Home);","map":{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\PetAdoption\\frontend\\src\\containers\\Home\\Home.js"],"names":["React","useEffect","withNamespaces","Container","AdvertList","SearchForm","Footer","NavBar","Home","props","t","lastCall","start","end","totalCount","ui","currentPage","isFetching","adverts","session","filters","tags","chats","fetchTags","setCurrentPage","fetchIterateAdverts","enqueueSnackbar","setFilters","resetFilters","setFavorite","searchAdverts","fetchAdverts","catch","error","variant","favoriteAdvert","slug","jwt","then","res","action","favorite","openChat","i","findIndex","c","advert","createChat","history","push","_id","onHandleSearchAdverts","iterateAdverts","direction","logout"],"mappings":"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","sourcesContent":["// NPM Modules\nimport React, { useEffect } from 'react';\nimport { withNamespaces } from 'react-i18next';\n// Material UI\nimport Container from '@material-ui/core/Container';\n// Components\nimport AdvertList from '../../components/adverts/AdvertList';\nimport SearchForm from '../../components/forms/SearchForm';\nimport Footer from '../../components/layout/Footer';\nimport NavBar from '../../components/layout/NavBar';\n// Containers\n// Own modules\n// Assets\n// CSS\nimport './styles.css';\n\n// Main component\nfunction Home(props) {\n  \n    // Translate\n    const { t } = props;\n\n\n    const { start, end, totalCount } = props.lastCall\n    const { currentPage, isFetching } = props.ui;\n    const { adverts, session, filters, tags, chats } = props;\n    const { fetchTags, setCurrentPage, fetchIterateAdverts, enqueueSnackbar, setFilters, resetFilters, setFavorite, searchAdverts, fetchAdverts } = props;\n\n    // On load\n    useEffect(() => {        \n        fetchTags();\n        fetchAdverts()\n        .catch (error => enqueueSnackbar(t('Error loading pets ERROR', {error}), { variant: 'error' }));\n    }, [fetchTags, fetchAdverts, enqueueSnackbar, t]);\n\n\n    const favoriteAdvert = (slug) => {\n        if (!session.jwt) {\n            enqueueSnackbar(t('You need to log in to manage favorites'), { variant: 'error' });\n        } else {\n            setFavorite(slug)\n            .then(res => enqueueSnackbar(t('Advert SLUG ACTION favorites', {slug, action: res.favorite?t('added to'):t('removed from')}), { variant: 'success' }))\n            .catch(error => enqueueSnackbar(t('Error adding advert to favorite ERROR', {error}), { variant: 'error' }));    \n        }\n    }\n\n    // Open chat\n    const openChat = slug => {\n        // Check first if already have a chat for that advert\n        const i = chats.findIndex(c => c.advert.slug === slug);\n        if (i < 0 ) {\n            props.createChat(slug)\n            .catch (error => enqueueSnackbar(t('Error opening a new chat session ERROR', {error}), { variant: 'error' }));\n        } else {\n            props.history.push(`/chats/${chats[i]._id}`);\n        }\n    }\n\n\n    const onHandleSearchAdverts = (filters) => {\n        if (filters) {\n            return searchAdverts(filters)\n                .catch(error => enqueueSnackbar(t('Error loading pets ERROR', {error}), { variant: 'error' }));\n        }\n        fetchAdverts()\n        .catch(error => enqueueSnackbar(t('Error loading pets ERROR', {error}), { variant: 'error' }));\n    }\n\n\n    const iterateAdverts = (direction) => {\n        return fetchIterateAdverts(direction)\n        .catch(error => enqueueSnackbar(t('Error loading pets ERROR', {error}), { variant: 'error' }));\n    }\n\n    // Render\n    return (\n        <React.Fragment>\n            <NavBar session={props.session} onLogout={props.logout}/>\n            <Container className='Container'>\n                <main className='Section__Wrapper'>\n                    <div className='Home__Results'>\n                        <SearchForm \n                            tags={tags} \n                            onSearchAdverts={onHandleSearchAdverts} \n                            onSetFilters={setFilters} \n                            onResetFilters={resetFilters} \n                            filters={filters} \n                        />\n                        <AdvertList \n                            type='tiles' \n                            start={start}\n                            end={end}\n                            totalCount={totalCount}\n                            currentPage={currentPage}\n                            adverts={adverts}\n                            session={session}\n                            isLoading={isFetching}\n                            onFavoriteAdvert={favoriteAdvert}\n                            onSetCurrentPage={setCurrentPage}\n                            onfetchIterateAdverts={iterateAdverts}\n                            onOpenChat={openChat}\n                        />\n                    </div>\n                </main>\n            </Container>\n            <Footer session={props.session} onLogout={props.logout} active='Home'/>\n        </React.Fragment>\n    );\n}\n\nexport default withNamespaces()(Home);"]},"metadata":{},"sourceType":"module"}