{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\PetAdoption\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\PetAdoption\\\\frontend\\\\src\\\\containers\\\\Edit\\\\Edit.js\";\n// NPM Modules\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { withNamespaces } from 'react-i18next'; // Material UI\n\nimport Container from '@material-ui/core/Container'; // Components\n\nimport AdvertForm from '../../components/forms/AdvertForm';\nimport HeaderAdvertEdit from '../../components/headers/HeaderAdvertEdit';\nimport NavBar from '../../components/layout/NavBar';\nimport Footer from '../../components/layout/Footer';\nimport Loading from '../../components/utils/Loading';\nimport Error from '../../components/error/Error'; // Models\n\nimport Advert, { EMPTY_ADVERT } from '../../models/Advert'; // Assets\n// CSS\n\nimport './styles.css'; // Componente de sección editar anuncios\n\nfunction Edit(props) {\n  // Props destructuring\n  const enqueueSnackbar = props.enqueueSnackbar,\n        fetchAdvert = props.fetchAdvert,\n        mode = props.mode,\n        t = props.t;\n  const slug = props.match.params.slug;\n  const _props$ui = props.ui,\n        isFetching = _props$ui.isFetching,\n        isUpdating = _props$ui.isUpdating,\n        isCreating = _props$ui.isCreating,\n        error = _props$ui.error; // Load inicial\n\n  const _useState = useState(),\n        _useState2 = _slicedToArray(_useState, 2),\n        advert = _useState2[0],\n        setAdvert = _useState2[1];\n\n  useEffect(() => {\n    if (mode === 'edit') {\n      fetchAdvert(slug).then(advert => setAdvert(advert)).catch(error => enqueueSnackbar(t('Error fetching advert ERROR', {\n        error\n      }), {\n        variant: 'error'\n      }));\n    } else {\n      setAdvert(new Advert(EMPTY_ADVERT));\n    }\n  }, [fetchAdvert, slug, mode, enqueueSnackbar, t]); // Manejador del submit del formulario\n\n  const submitAdvert = inputs => {\n    // Creo un anuncio con los datos del estado y lo valido\n    const newAdvert = new Advert(inputs);\n\n    if (!newAdvert.isValid() || !inputs.file && !inputs.photo) {\n      enqueueSnackbar(t('Advert data is incomplete'), {\n        variant: 'error'\n      });\n    } else {\n      // Lanzando operacion al backend\n      if (mode === 'create') {\n        props.createAdvert(newAdvert).then(res => enqueueSnackbar(t('Advert X created', {\n          slug: res.slug\n        }), {\n          variant: 'success'\n        })).catch(error => enqueueSnackbar(t('Error creating advert ERROR', {\n          error\n        }), {\n          variant: 'error'\n        }));\n      } else {\n        props.editAdvert(newAdvert).then(res => enqueueSnackbar(t('Advert X updated', {\n          slug: res.slug\n        }), {\n          variant: 'success'\n        })).catch(error => enqueueSnackbar(t('Error updating advert ERROR', {\n          error\n        }), {\n          variant: 'error'\n        }));\n      }\n    }\n  }; // Render\n\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(NavBar, {\n    session: props.session,\n    onLogout: props.logout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }), React.createElement(Container, {\n    className: \"Container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"main\", {\n    className: \"Section__Wrapper Edit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(HeaderAdvertEdit, {\n    mode: mode,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }), advert && React.createElement(AdvertForm, {\n    noValidate: true,\n    autoComplete: \"off\",\n    className: \"Profile__Form\",\n    advert: advert,\n    onSubmit: submitAdvert,\n    tags: props.tags,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }), isFetching && React.createElement(Loading, {\n    text: 'fetching advert',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }), (isUpdating || isCreating) && React.createElement(Loading, {\n    text: mode === 'edit' ? t('Trying to edit advert...') : t('Trying to create advert...'),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }), error && React.createElement(Error, {\n    error: error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }))), React.createElement(Footer, {\n    session: props.session,\n    onLogout: props.logout,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }));\n}\n\nEdit.propTypes = {\n  mode: PropTypes.oneOf(['edit', 'create']).isRequired\n};\nexport default withNamespaces()(Edit);","map":{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\PetAdoption\\frontend\\src\\containers\\Edit\\Edit.js"],"names":["React","useState","useEffect","PropTypes","withNamespaces","Container","AdvertForm","HeaderAdvertEdit","NavBar","Footer","Loading","Error","Advert","EMPTY_ADVERT","Edit","props","enqueueSnackbar","fetchAdvert","mode","t","slug","match","params","ui","isFetching","isUpdating","isCreating","error","advert","setAdvert","then","catch","variant","submitAdvert","inputs","newAdvert","isValid","file","photo","createAdvert","res","editAdvert","session","logout","tags","propTypes","oneOf","isRequired"],"mappings":"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","sourcesContent":["// NPM Modules\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { withNamespaces } from 'react-i18next';\n// Material UI\nimport Container from '@material-ui/core/Container';\n// Components\nimport AdvertForm from '../../components/forms/AdvertForm';\nimport HeaderAdvertEdit from '../../components/headers/HeaderAdvertEdit';\nimport NavBar from '../../components/layout/NavBar';\nimport Footer from '../../components/layout/Footer';\nimport Loading from '../../components/utils/Loading';\nimport Error from '../../components/error/Error';\n// Models\nimport Advert, { EMPTY_ADVERT } from '../../models/Advert';\n// Assets\n// CSS\nimport './styles.css';\n\n\n// Componente de sección editar anuncios\nfunction Edit(props) {\n\n    // Props destructuring\n    const { enqueueSnackbar, fetchAdvert, mode, t} = props;\n    const { slug } = props.match.params;\n    const { isFetching, isUpdating, isCreating, error } = props.ui;\n\n    // Load inicial\n    const [ advert, setAdvert ] = useState();\n    useEffect(() => {\n        if (mode === 'edit') {\n            fetchAdvert(slug)\n            .then (advert => setAdvert(advert))\n            .catch(error  => enqueueSnackbar(t('Error fetching advert ERROR', {error}), { variant: 'error' }));\n        } else {\n            setAdvert(new Advert(EMPTY_ADVERT))\n        }\n    }, [fetchAdvert, slug, mode, enqueueSnackbar, t])\n\n    // Manejador del submit del formulario\n    const submitAdvert = (inputs) => {\n        // Creo un anuncio con los datos del estado y lo valido\n        const newAdvert = new Advert(inputs);\n        if (!newAdvert.isValid() || ( !inputs.file && !inputs.photo )) {\n            enqueueSnackbar(t('Advert data is incomplete'), { variant: 'error' });\n        } else {\n            // Lanzando operacion al backend\n            if (mode === 'create') {\n                props.createAdvert(newAdvert)\n                .then (res => enqueueSnackbar(t('Advert X created', { slug: res.slug}), { variant: 'success' }))\n                .catch(error => enqueueSnackbar(t('Error creating advert ERROR', {error}), { variant: 'error' }));\n            } else {\n                props.editAdvert(newAdvert)\n                .then (res => enqueueSnackbar(t('Advert X updated', {slug: res.slug}), { variant: 'success' }))\n                .catch(error => enqueueSnackbar(t('Error updating advert ERROR', {error}), { variant: 'error' }));\n            }\n        } \n    }\n\n    // Render\n    return (\n        <React.Fragment>\n            <NavBar session={props.session} onLogout={props.logout}/>\n            <Container className='Container'>\n                <main className='Section__Wrapper Edit'>\n                    <HeaderAdvertEdit mode={mode}/>\n                    { advert &&\n                        <AdvertForm noValidate \n                                    autoComplete='off' \n                                    className='Profile__Form'\n                                    advert={advert}\n                                    onSubmit={submitAdvert}\n                                    tags={props.tags}\n                        />\n                    }\n                    { isFetching && <Loading text={'fetching advert'}/> }\n                    { ( isUpdating || isCreating ) && <Loading text={mode === 'edit' ? t('Trying to edit advert...') : t('Trying to create advert...') }/> }\n                    { error && <Error error={error}/> }\n                </main>\n            </Container>\n            <Footer session={props.session} onLogout={props.logout}/>\n        </React.Fragment>\n    );\n}\n\nEdit.propTypes = {\n  mode: PropTypes.oneOf(['edit', 'create']).isRequired,\n}\n\nexport default withNamespaces()(Edit);"]},"metadata":{},"sourceType":"module"}